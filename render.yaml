# Render Blueprint - Vista Web Application
# https://render.com/docs/blueprint-spec

services:
  - type: web
    name: vista-web
    runtime: node
    region: oregon
    plan: free
    buildCommand: |
      cd packages/vista && npm install --legacy-peer-deps && cd ../../apps/web && npm install --legacy-peer-deps && npx vista build
    startCommand: cd apps/web && NODE_OPTIONS="--import tsx" npx vista start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3003
    healthCheckPath: /
